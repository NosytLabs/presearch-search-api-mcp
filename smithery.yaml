name: presearch-mcp-server
version: "1.0.0"
description: "Official Model Context Protocol server for Presearch Search API - Production Ready"
author: "Presearch Community"
license: "MIT"

# Runtime specification
runtime: nodejs

# Build configuration
build:
  command: npm install
  workingDirectory: "."

# Start configuration
startCommand:
  command: node src/server/server_enhanced.js
  workingDirectory: "."

# Environment variables
env:
  - name: PRESEARCH_API_KEY
    required: true
    description: "Presearch API key for authentication"
    type: string
  - name: PRESEARCH_BASE_URL
    required: false
    description: "Presearch API base URL"
    type: string
    default: "https://na-us-1.presearch.com"
  - name: PRESEARCH_TIMEOUT
    required: false
    description: "API request timeout in milliseconds"
    type: number
    default: 30000
  - name: PRESEARCH_USER_AGENT
    required: false
    description: "User agent string for API requests"
    type: string
    default: "PresearchMCP/1.0.0"
  - name: LOG_LEVEL
    required: false
    description: "Logging level (error, warn, info, debug)"
    type: string
    default: "info"
  - name: LOG_ENABLE_CONSOLE
    required: false
    description: "Enable console logging"
    type: boolean
    default: true
  - name: LOG_ENABLE_FILE
    required: false
    description: "Enable file logging"
    type: boolean
    default: false
  - name: LOG_DIRECTORY
    required: false
    description: "Directory for log files"
    type: string
    default: "./logs"
  - name: LOG_ENABLE_PERFORMANCE
    required: false
    description: "Enable performance logging"
    type: boolean
    default: false
  - name: LOG_ENABLE_REQUEST
    required: false
    description: "Enable request/response logging"
    type: boolean
    default: false
  - name: ERROR_MAX_RETRIES
    required: false
    description: "Maximum number of API retries"
    type: number
    default: 3
  - name: ERROR_RETRY_DELAY
    required: false
    description: "Delay between retries in milliseconds"
    type: number
    default: 1000
  - name: ERROR_CIRCUIT_BREAKER_ENABLED
    required: false
    description: "Enable circuit breaker pattern"
    type: boolean
    default: true
  - name: ERROR_CIRCUIT_BREAKER_THRESHOLD
    required: false
    description: "Circuit breaker failure threshold"
    type: number
    default: 5
  - name: PERF_ENABLE_METRICS
    required: false
    description: "Enable performance metrics collection"
    type: boolean
    default: true
  - name: PERF_SLOW_QUERY_THRESHOLD
    required: false
    description: "Slow query threshold in milliseconds"
    type: number
    default: 5000
  - name: PERF_ENABLE_MEMORY_MONITORING
    required: false
    description: "Enable memory usage monitoring"
    type: boolean
    default: false

exampleConfig:
  PRESEARCH_API_KEY: "your-presearch-api-key-here"
  PRESEARCH_BASE_URL: "https://na-us-1.presearch.com"
  PRESEARCH_TIMEOUT: 30000
  LOG_LEVEL: "info"
  LOG_ENABLE_CONSOLE: true
  ERROR_MAX_RETRIES: 3
  PERF_ENABLE_METRICS: true


# Deployment settings
deployment:
  # Resource requirements
  resources:
    memory: "256Mi"
    cpu: "100m"
    ephemeralStorage: "100Mi"

  # Scaling parameters
  scaling:
    minReplicas: 1
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80


  # Timeout settings
  timeouts:
    startup: "60s"
    readiness: "10s"
    liveness: "30s"


# Security and access controls
security:
  # Environment variable handling
  envVarHandling:
    redactSecrets: true
    validateInputs: true

  # Isolation settings
  isolation:
    runAsNonRoot: true
    readOnlyRootFilesystem: true
    allowPrivilegeEscalation: false

  # Network security
  networkSecurity:
    restrictExternalAccess: true
    enableTLS: false

# MCP-specific configuration
mcp:
  # Transport specification
  transport:
    type: "stdio"
    protocolVersion: "2024-11-05"

  # Tool definitions
  tools:
    - name: "presearch_search"
      description: "Search the Presearch decentralized search engine"
      parameters:
        query: "string"
        page: "string (optional)"
        lang: "string (optional)"
        time: "string (optional)"
        safe: "string (optional)"
        ip: "string (optional)"
        useCache: "boolean (optional)"

    - name: "presearch_export_results"
      description: "Export search results in various formats"
      parameters:
        query: "string"
        format: "enum (json, csv, markdown)"
        maxResults: "number (optional)"

    - name: "presearch_scrape_content"
      description: "Scrape content from web pages"
      parameters:
        url: "string"
        extractText: "boolean (optional)"
        extractLinks: "boolean (optional)"
        extractImages: "boolean (optional)"
        includeMetadata: "boolean (optional)"

    - name: "presearch_cache_stats"
      description: "Get cache statistics"
      parameters: {}

    - name: "presearch_cache_clear"
      description: "Clear the search cache"
      parameters: {}

    - name: "presearch_health_check"
      description: "Perform health check on the server"
      parameters: {}

  # Protocol compatibility
  protocol:
    version: "1.0"
    supportedVersions: ["1.0"]
    features:
      - "tool-calling"
      - "resource-access"
      - "prompt-management"

# Dependencies
dependencies:
  - "@modelcontextprotocol/sdk@^1.15.1"
  - "axios@^1.7.2"
  - "dotenv@^17.2.0"
  - "zod@^3.22.4"
  - "winston@^3.13.0"

# Repository information
repository:
  type: "git"
  url: "https://github.com/NosytLabs/presearch-search-api-mcp.git"

# Homepage
homepage: "https://presearch.io"

# Keywords
keywords:
  - "mcp"
  - "presearch"
  - "search"
  - "model-context-protocol"
  - "ai-tools"
  - "decentralized-search"
  - "privacy-focused"
  - "web-scraping"
  - "ai-assistant"